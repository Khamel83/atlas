{% extends "base.html" %}

{% block title %}Atlas - Dashboard{% endblock %}

{% block content %}
    <div class="card">
        <h2>Welcome to Atlas</h2>
        <p>Your simple digital filing cabinet for organizing and processing content from various sources.</p>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number">{{ total_content }}</div>
            <div class="stat-label">Total Items</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ content_types }}</div>
            <div class="stat-label">Content Types</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ recent_items }}</div>
            <div class="stat-label">Recent Items</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ processed_items }}</div>
            <div class="stat-label">Processed</div>
        </div>
    </div>

    <div class="card">
        <h2>System Status</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">{{ dashboard_stats.total_content }}</div>
                <div class="stat-label">Total Items</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ dashboard_stats.recent_activity }}</div>
                <div class="stat-label">Last 7 Days</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ dashboard_stats.content_types }}</div>
                <div class="stat-label">Content Types</div>
            </div>
        </div>
        <div style="margin-top: 1rem;">
            <a href="/stats" class="btn btn-secondary">üìä View Detailed Statistics</a>
        </div>
    </div>

    <div class="card">
        <h2>Quick Actions</h2>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
            <a href="/add" class="btn btn-primary">‚ûï Add Content</a>
            <a href="/search" class="btn btn-secondary">üîç Search Content</a>
            <button onclick="this.parentElement.parentElement.nextElementSibling.nextElementSibling.scrollIntoView({behavior: 'smooth'})" class="btn btn-info">üìã Recent Activity</button>
        </div>
    </div>

    <div class="card">
        <h2>Recent Content</h2>
        <div id="recent-content">
            {% for item in recent_content %}
            <div class="content-item card">
                <div class="content-title">
                    {% if item.url %}
                    <a href="{{ item.url }}" target="_blank" rel="noopener">{{ item.title }}</a>
                    {% else %}
                    {{ item.title }}
                    {% endif %}
                </div>
                <div class="content-meta">
                    <span class="badge bg-primary">{{ item.content_type or 'Unknown' }}</span>
                    <span class="badge bg-secondary">Stage {{ item.stage }}</span>
                    <span class="text-muted">{{ item.created_at[:10] }}</span>
                </div>
                {% if item.content %}
                <div class="content-preview">{{ item.content[:150] }}{% if item.content|length > 150 %}...{% endif %}</div>
                {% endif %}
            </div>
            {% endfor %}
            {% if not recent_content %}
            <p>No content yet. <a href="/add">Add some content</a> to get started.</p>
            {% endif %}
        </div>
    </div>
{% endblock %}